# 目录
- [目录](#目录)
- [背景](#背景)
- [环境](#环境)
- [项目](#项目)
  - [简介](#简介)
  - [文件](#文件)
  - [使用](#使用)
    - [三套按键系统](#三套按键系统)
      - [第一套: 视图模式下 全部上升沿(松开按键时)触发](#第一套-视图模式下-全部上升沿松开按键时触发)
      - [第二套: 设置模式下 全部上升沿(松开按键时)触发](#第二套-设置模式下-全部上升沿松开按键时触发)
      - [第三套: 修改选项时](#第三套-修改选项时)
      - [中断按键](#中断按键)
  - [烧录](#烧录)
- [项目负责人](#项目负责人)
- [项目贡献者](#项目贡献者)


# 背景
  于 2023/12/06 项目基本完成，后续持续更新完善相关文档等。

  这是对于硬件开发刚入门的小白或者是刚学完单片机这门课程的同学，一个非常适合上手，用于提升自己能力、将知识用作时间、增加项目经验的一个硬件综合实践开源项目(c51)。


# 环境
 - Proteus >= 8.6
 - Keil C51 uVision5
 - Visual Studio Code (可选)


# 项目
## 简介
  温度检测与调节系统: 利用ds18b20进行温度检测，存储温度上限、温度下限、温感分辨率。lcd1602进行相关信息显示。24c02存储音乐。

  实现了：实时更新温度；记录开机以后的最高最低温度；当温度高于上限或低于下限会开启音乐警报并计时。高于温度上限会驱动直流电机进行降温；低于温度下限会闭合继电器；可设置 温度上下限、温感分辨率、风扇档位步长(°C/档)、报警音乐序号、音乐节拍快慢。

## 文件
  以下是针对不同硬件操作的库封装(c51Lib库)
   - "lcd1602.h": 针对LCD1602所有基本函数和命令的完全封装
   - "ds18b20.h": 针对DS18B20部分(主要是单机)命令的基本函数和常用操作的封装
   - "i2c.h": 针对iic串口通信的信号模拟和基本操作的封装
   - "at24c02.h": 基于iic串口通信24c02的连续读、页写、连续页写的封装
  
  以下是构成项目的主要逻辑的文件
   - "ultimate.*": 基于以上封装的库函数，实现项目复杂操作的函数
   - "global.c": 定义全局变量
   - "utility.c": c语言通用函数，这里主要是实现将浮点型/整形转字符串因为标准库'sprintf'会比自己封装多占用0.8kb code段
   - "main.c": 实现程序的主要逻辑以及中断等

## 使用
### 三套按键系统
#### 第一套: 视图模式下 全部上升沿(松开按键时)触发
 - S1: 主视图 (温度信息查询视图)
 - S2: 最高/最低温(温度极值)查询视图
 - S3: 温度越界计时视图
 - S4: 设置查询视图
#### 第二套: 设置模式下 全部上升沿(松开按键时)触发
 - S1: 修改当前选项值
 - S2: 下一项
 - S3: 上一项
 - S4: 回到第一项
#### 第三套: 修改选项时
 - S1: 取消 上升沿触发
 - S2: 加 低电平触发 按下触发一次 长按超过阈值 每隔一段时间间隔触发
 - S3: 减 低电平触发 按下触发一次 长按超过阈值 每隔一段时间间隔触发
 - S4: 确认 上升沿触发
#### 中断按键
 - S5: 未分配
 - S6: 长按超过1秒 显示模式/视图模式切换

![视图模式和设置模式显示画面](.\\docs\\仿真\\显示.png "模式显示")

## 烧录
 - 先烧录music.hex文件 其中包含歌曲的编码后的字节，运行后会写入24c02 当中，否则24c02没有歌曲可能会出现未知错误 (TODO: 更新增强健壮性)
 - 再烧录Ultimate.hex文件 这是项目本体


# 项目负责人
 - 李宗霖：c51Lib库封装、程序模块封装、程序设计、软硬件调试、项目计划提出于实施者；


# 项目贡献者
ps: 不根据先后论贡献大小
 - 万鹰正：基于c51Lib库提供存入音乐程序的封装、硬件测试；
 - 杨艺铭：流程图绘制包括：主函数、定时器T0中断、DS18B20、LCD1602；
 - 周妍妍：流程图绘制包括：系统使用、3个按键系统实现流程图、开机动画流程图、设置页面实现流程图；依赖图绘制包括：文件依赖图、模块依赖图；
 - 刘  媛：绘制结构框图、提供部分proteus图，协助完善代码注释、协助实践报告；
 - 陈国孜：会议记录及总结、撰写实验报告、实践报告中图片代码的整合；

