C51 COMPILER V9.60.7.0   GLOBAL                                                            12/04/2023 07:06:33 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE GLOBAL
OBJECT MODULE PLACED IN .\Objects\global.obj
COMPILER INVOKED BY: E:\Keil C51\C51\BIN\C51.EXE ..\src\global.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\include) DEBUG OBJEC
                    -TEXTEND PRINT(.\Listings\global.lst) OBJECT(.\Objects\global.obj)

line level    source

   1          /** 在此添加共享的全局变量 */
   2          #define uint unsigned int
   3          #define uchar unsigned char
   4          
   5          // ==================== 标志位 ====================
   6          
   7          /** 约定: 标志位采用下划线方式命名 */
   8          // 模式状态标志位 自上往下 优先级递减 (可扩充)
   9          bit settings_mode = 0; // 当前是设置模式
  10          // ... ...
  11          
  12          // 行动标志位
  13          bit page_change = 0;       // 视图模式 视图发生改变
  14          bit ready_settings = 0;    // 将会进入设置模式
  15          bit convert_finished = 1;  // 温度传感器完成温度转化
  16          bit dc_motor_working = 0;  // 直流电机需要工作
  17          bit above_upper_limit = 0; // 温度高于上限阈值
  18          bit below_lower_limit = 0; // 温度低于下限阈值
  19          bit save_in_24c02 = 0;     // 在主函数中进行24c02数据的存储(妥协)
  20          
  21          // ==================== ===== ====================
  22          
  23          // ==================== 用于计算时间戳的计数变量 ====================
  24          
  25          uint dcmCount = 0;     // 用于分割直流电机方波
  26          uint convertCount = 0; // 用于计算温度传感器转化时间
  27          uchar changeCount = 0; // 用于计算长按 持续增加/减少 间隔
  28          
  29          // ==================== ==================== ====================
  30          
  31          // ==================== 模式需要用到的变量 ====================
  32          
  33          uchar page = 0x7f;   // 用于视图模式选择不同视图
  34          uchar option = 0xff; // 用于设置模式选择不同项
  35          
  36          // 视图模式 主视图  设置模式 第 1 2 _ _ 项
  37          char upperLimit = 127;    // 温度上限
  38          char lowerLimit = -55;    // 温度下限
  39          float temperature = 80.5; // 温度
  40          uchar fanGear = 0;        // 风扇档位
  41          
  42          // 视图模式 温度极值查询视图
  43          float highest = -55; // 开机后最高温
  44          float lowest = 127;  // 开机后最低温
  45          
  46          // 视图模式 温度过界计时视图
  47          uchar hus = 0, hms = 0, hs = 0, hm = 0; // 开机后 超过温度上限 时间
  48          uchar lus = 0, lms = 0, ls = 0, lm = 0; // 开机后 低于温度下限 时间
  49          
  50          // 设置模式 第 4 项
  51          uchar fanGearStep = 2; // 风扇/直流电机档位步长
  52          
  53          // 设置模式 第 3 _ 项 在 11.0592MHz 下 分辨率对应最大转换时间需要 T0 的定时次数
  54          uchar dsr = 0x03; // ds18b20 resolution 温度传感器分辨率
C51 COMPILER V9.60.7.0   GLOBAL                                                            12/04/2023 07:06:33 PAGE 2   

  55          uint code cttcn[] = {
  56              337, 675, 1350, 2700
  57          }; // convert temperature timer count num
  58          
  59          // 设置模式 第 5 6 项
  60          uchar ringtoneNum = 1; // 铃声序号
  61          uchar volume = 7;      // 音量大小
  62          
  63          // ==================== =============== ====================
  64          
  65          // ==================== 其他的 ====================
  66          
  67          // 存储摄氏度 字符集的 '°' ASCII 和标准集不一样
  68          uchar code DC[] = {0xdf, 0x43, 0}; // °C
  69          
  70          // 定义一个最大长度的字符串用作打印的空间
  71          uchar numStr[] = "     ";
  72          
  73          // 通过全局设置显示等待(间隔)时间
  74          uint SHOW_WAIT = 0;
  75          
  76          // 用于接收按键操作的变量
  77          uchar key = 0xf;
  78          uchar pressKey = 0xff;
  79          
  80          // 用与同I2C进行交互的变量
  81          uchar idata settingsSave = 0x00;
  82          uchar idata ringtone[127];
  83          
  84          // ==================== ===== ====================


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     44    ----
   IDATA SIZE       =    128    ----
   BIT SIZE         =      8    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
